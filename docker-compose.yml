version: "3"

services:
  api:
    container_name: api
    build:
      context: api-back
      dockerfile: Dockerfile
    networks:
      - weather
    ports:
      - "3977:3977"
    volumes:
      - ./log/:/opt/app/log

  # nginx:
  #   container_name: nginx
  #   build:
  #     context: front
  #     dockerfile: Dockerfile
  #   networks:
  #     - weather
  #   ports:
  #     - "80:80"
  nginx:
    container_name: nginx
    build:
      context: front
      dockerfile: Dockerfile
    networks:
      - weather
    ports:
      - mode: host
        protocol: tcp
        published: 80
        target: 80
      - mode: host
        protocol: tcp
        published: 443
        target: 81

  networks:
    weather:
      driver: "bridge"
